---
- name: "Include tasks to set default value to undefined variables."
  include_tasks: default.yml

- name: "Include tasks to compute bastion variables."
  include_tasks: bastion.yml
  when: use_bastion | bool

# Variables needed to established connection are all set, we can gather the facts
# Some are needed to set other varibles
- name: "Gather ansible facts."
  setup:

- name: "Include tasks to compute proxy variables."
  include_tasks: proxy.yml

- name: "Include tasks to compute database variables."
  include_tasks: database.yml

- name: "Include tasks to compute rabbitmq variables."
  include_tasks: rabbitmq.yml

- name: "Include tasks to compute URL variables."
  include_tasks: url.yml

- name: "Include tasks to check S3 variables."
  include_tasks: s3.yml
  when: s3_enabled | bool

- name: "Include tasks to compute workers variables."
  include_tasks: workers.yml
